import { onNavigate } from '@violentmonkey/url';
import globalCss from './style.css';
import styles, { stylesheet } from './style.module.css';
import { render } from 'solid-js/web';
import * as scripts from './scripts/index.js';

function Main() {
  return (
    <div
      id="buttons-block"
      style="display: flex;justify-content: center;align-items: center;margin-top: -20px;"
    >
      <style>{[globalCss, stylesheet].join('\n')}</style>
      <button
        id="player-button"
        onClick={scripts.hikkaWatari}
        style="margin-right: 3px;border-radius: 10px 2px 2px 10px;"
      >
        <div class={styles.player_button} style="color: gray;"></div>
      </button>
      <button
        id="amanogawa-button"
        style="border-radius: 2px 2px 2px 2px;margin-right: 3px;"
      >
        <svg
          width="31"
          height="25"
          viewBox="0 0 31 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M23.7041 11.2921C23.6761 11.1215 23.6352 10.9538 23.5803 10.7902C23.1313 9.46004 22.2142 8.42025 20.9749 7.75867C20.1227 7.30364 19.2206 6.98432 18.3006 6.79772C17.3805 6.61111 16.5024 6.56322 15.5894 6.60313C14.6763 6.64404 13.8411 6.83264 12.9789 7.09608C12.7634 7.16194 12.5678 7.25075 12.3622 7.33457C12.2595 7.37648 12.1587 7.42538 12.0609 7.47327C11.9631 7.52117 11.8673 7.56707 11.7735 7.61896C11.3973 7.82652 11.0221 8.02809 10.6689 8.27456C9.96037 8.76751 9.30277 9.28441 8.70006 9.91207C8.09735 10.5387 7.56847 11.1943 7.10147 11.9477C6.63447 12.7011 6.26526 13.4984 5.98685 14.3626C5.84715 14.7967 5.75335 15.2477 5.69647 15.7317C5.63959 16.2156 5.64059 16.7295 5.7294 17.2424C5.7733 17.4989 5.86112 17.7933 5.98585 18.0567C6.11059 18.3201 6.29719 18.6035 6.50874 18.8261C6.72028 19.0476 6.9927 19.2502 7.25814 19.3899C7.52457 19.5286 7.82593 19.6373 8.09934 19.6922C8.64618 19.801 9.20199 19.812 9.72488 19.7291C10.2468 19.6473 10.7247 19.5156 11.1808 19.313C12.0948 18.9059 12.8243 18.4069 13.5417 17.7054C13.7982 17.454 13.7323 17.1127 13.5248 16.8273C13.3182 16.5419 12.7873 16.6447 12.6556 16.7435C12.5239 16.8423 12.6227 16.7684 12.6207 16.7694C11.9851 17.3173 11.3394 17.7444 10.592 18.0587C10.2178 18.2154 9.82965 18.3141 9.44946 18.37C9.07027 18.4249 8.68709 18.4259 8.34083 18.3501C7.99457 18.2742 7.73612 18.1595 7.49463 17.921C7.25415 17.6825 7.15436 17.427 7.0855 17.0818C7.01665 16.7365 7.01466 16.3463 7.05158 15.9721C7.0885 15.5979 7.16134 15.2048 7.2771 14.8306C7.5086 14.0832 7.83092 13.3607 8.24004 12.6891C8.64917 12.0176 9.12615 11.4079 9.666 10.8391C10.2058 10.2703 10.8006 9.79033 11.4412 9.34029C11.7615 9.11577 12.0938 8.93116 12.4431 8.73758C12.5089 8.70165 12.6177 8.64577 12.6985 8.60586C12.7794 8.56594 12.8642 8.52303 12.953 8.48512C13.1316 8.41028 13.2913 8.33244 13.4859 8.27357C15.0415 7.80157 16.5493 7.6958 18.1589 7.96722C18.9662 8.10293 19.7445 8.37236 20.464 8.74955C24.654 10.9449 21.9837 16.052 19.8273 18.7213C18.6159 20.2201 17.1999 21.4804 15.5155 22.4254C15.1403 22.6359 14.7462 22.8185 14.348 22.9922C13.9509 23.1658 13.5457 23.3265 13.1296 23.4622C12.2974 23.7336 11.4612 23.9741 10.593 24.1178C9.72487 24.2615 8.85373 24.3463 7.96862 24.3293C7.08351 24.3133 6.20938 24.2076 5.3532 23.9651C4.49703 23.7226 3.72168 23.3364 3.03016 22.7776C2.68689 22.5002 2.41447 22.1699 2.17897 21.8037C1.94347 21.4375 1.77084 21.0483 1.66108 20.6222C1.44354 19.773 1.3697 18.8929 1.43057 18.0208C1.49144 17.1476 1.63314 16.2815 1.86664 15.4503C2.33265 13.7958 2.99922 12.2261 3.8534 10.7553C4.70758 9.28341 5.71443 8.01212 6.88194 6.8047C7.46569 6.20099 8.09735 5.70305 8.74497 5.18316C9.39558 4.66127 10.0472 4.15835 10.7227 3.67338C10.7237 3.67238 10.7128 3.68336 10.7267 3.67039C10.7457 3.65242 10.7756 3.60453 10.7507 3.56162C10.7257 3.51871 10.6709 3.48977 10.622 3.50873C10.2228 3.6664 9.83963 3.85599 9.46842 4.06554C9.09721 4.2751 8.74397 4.49563 8.39072 4.73112C8.03648 4.96662 7.68922 5.20711 7.35892 5.47753C7.02863 5.74795 6.70632 6.01838 6.40396 6.32672C5.18955 7.56308 4.14777 8.88526 3.24869 10.3741C2.79666 11.1225 2.40948 11.8928 2.05923 12.7101C1.70898 13.5264 1.40862 14.3516 1.17611 15.2337C0.943607 16.1158 0.777962 17.0029 0.722081 17.9479C0.6662 18.8919 0.74104 19.8579 0.992503 20.7998C1.11824 21.2708 1.33378 21.7588 1.6062 22.1769C1.87861 22.595 2.22587 23.0041 2.61205 23.3145C3.39039 23.9401 4.28448 24.3732 5.22248 24.6337C6.16048 24.8941 7.08251 24.9959 8.02251 25.0079C8.9625 25.0208 9.86258 24.928 10.7657 24.7654C11.6687 24.6017 12.5349 24.3712 13.3871 24.0659C14.2392 23.7605 15.0695 23.4272 15.8488 22.9792C17.3995 22.0871 18.7466 21.0074 19.9511 19.6852C21.1246 18.397 22.1115 16.8473 22.8429 15.2657C23.3777 14.1091 23.9186 12.6063 23.7041 11.2921Z"
            fill="gray"
          ></path>
          <path
            d="M16.8917 3.03775C16.9136 3.06968 16.9176 3.11059 16.9036 3.14652L16.4317 4.34795C16.3957 4.43876 16.4796 4.53056 16.5734 4.50462L17.8137 4.14838C17.8506 4.1374 17.8915 4.14638 17.9215 4.17033L18.9183 4.98958C18.9942 5.05145 19.1069 5.00056 19.1109 4.90277L19.1558 3.61352C19.1568 3.5746 19.1778 3.53968 19.2097 3.51872L20.2974 2.8242C20.3792 2.77132 20.3663 2.64758 20.2745 2.61465L19.062 2.17359C19.0261 2.16062 18.9982 2.12968 18.9882 2.09276L18.6639 0.843429C18.6389 0.748631 18.5172 0.723684 18.4573 0.80052L17.663 1.81735C17.6391 1.84829 17.6022 1.86425 17.5632 1.86226L16.275 1.78442C16.1772 1.77843 16.1153 1.8872 16.1702 1.96803L16.8917 3.03775Z"
            fill="gray"
          ></path>
          <path
            d="M21.0437 5.53341L22.5165 5.66313C22.5604 5.66713 22.6003 5.69207 22.6223 5.73099L23.3497 7.01824C23.4046 7.11603 23.5473 7.10805 23.5912 7.00427L24.17 5.64318C24.187 5.60226 24.2239 5.57233 24.2668 5.56335L25.7157 5.26898C25.8255 5.24702 25.8614 5.10832 25.7776 5.03547L24.6619 4.06454C24.628 4.03561 24.6111 3.9917 24.616 3.94779L24.7837 2.47893C24.7967 2.36816 24.6759 2.29033 24.5801 2.34821L23.3118 3.10858C23.2739 3.13153 23.227 3.13453 23.1861 3.11557L21.841 2.50188C21.7392 2.45598 21.6284 2.54578 21.6534 2.65455L21.9847 4.09548C21.9946 4.13839 21.9827 4.18429 21.9527 4.21722L20.9539 5.30689C20.88 5.39072 20.9319 5.52343 21.0437 5.53341Z"
            fill="gray"
          ></path>
          <path
            d="M24.7927 8.8204L26.1997 9.69852C26.2416 9.72447 26.2685 9.77037 26.2705 9.82026L26.3454 11.4767C26.3513 11.6025 26.498 11.6663 26.5938 11.5855L27.8631 10.5188C27.901 10.4868 27.9529 10.4759 28.0008 10.4888L29.5994 10.9299C29.7202 10.9628 29.8269 10.8431 29.78 10.7273L29.1574 9.18961C29.1384 9.14371 29.1444 9.09082 29.1713 9.04991L30.0854 7.66586C30.1542 7.56108 30.0734 7.42238 29.9487 7.43136L28.2942 7.54811C28.2443 7.5521 28.1964 7.53015 28.1655 7.49123L27.1317 6.195C27.0539 6.09721 26.8972 6.13113 26.8662 6.25287L26.4661 7.86244C26.4541 7.91034 26.4192 7.95025 26.3723 7.96722L24.8196 8.54997C24.7029 8.59388 24.6869 8.75354 24.7927 8.8204Z"
            fill="gray"
          ></path>
          <path
            d="M22.6263 22.0282L21.797 22.1529C21.7721 22.1569 21.7471 22.148 21.7302 22.13L21.1574 21.5183C21.1145 21.4724 21.0366 21.4953 21.0257 21.5582L20.888 22.3854C20.884 22.4104 20.868 22.4313 20.8451 22.4423L20.0857 22.7976C20.0278 22.8245 20.0268 22.9053 20.0827 22.9343L20.8271 23.3205C20.849 23.3324 20.865 23.3544 20.868 23.3793L20.9718 24.2116C20.9798 24.2744 21.0566 24.3014 21.1015 24.2565L21.6992 23.6677C21.7172 23.6497 21.7431 23.6428 21.7671 23.6468L22.5903 23.8054C22.6522 23.8174 22.7011 23.7525 22.6732 23.6956L22.298 22.9462C22.287 22.9233 22.287 22.8974 22.299 22.8754L22.7041 22.141C22.735 22.0851 22.6881 22.0182 22.6263 22.0282Z"
            fill="gray"
          ></path>
          <path
            d="M25.9752 20.0794C25.9493 20.0535 25.9383 20.0176 25.9443 19.9816L26.1608 18.7892C26.1768 18.6994 26.083 18.6295 26.0012 18.6714L24.9235 19.2252C24.8915 19.2422 24.8526 19.2412 24.8207 19.2242L23.753 18.6505C23.6721 18.6076 23.5763 18.6754 23.5913 18.7652L23.7849 19.9617C23.7909 19.9976 23.7789 20.0345 23.752 20.0595L22.8758 20.8967C22.81 20.9595 22.8449 21.0713 22.9357 21.0863L24.1332 21.2719C24.1691 21.2779 24.2 21.3008 24.216 21.3327L24.7419 22.4244C24.7818 22.5072 24.8985 22.5082 24.9404 22.4264L25.4873 21.3447C25.5032 21.3118 25.5352 21.2898 25.5711 21.2849L26.7715 21.1222C26.8623 21.1102 26.8993 20.9985 26.8344 20.9346L25.9752 20.0794Z"
            fill="gray"
          ></path>
          <path
            d="M30.5854 14.619L28.7862 14.0383C28.7324 14.0203 28.6904 13.9774 28.6735 13.9235L28.1316 12.1114C28.0907 11.9747 27.9101 11.9437 27.8263 12.0595L26.7177 13.5912C26.6847 13.6371 26.6308 13.6641 26.574 13.6621L24.683 13.6172C24.5403 13.6142 24.4555 13.7758 24.5393 13.8916L25.6539 15.4193C25.6879 15.4652 25.6958 15.5251 25.6769 15.578L25.0502 17.3622C25.0023 17.4969 25.131 17.6276 25.2667 17.5837L27.0639 16.9959C27.1178 16.978 27.1767 16.988 27.2226 17.0229L28.7254 18.1704C28.8391 18.2573 29.0028 18.1764 29.0028 18.0327L28.9988 16.1418C28.9988 16.0849 29.0267 16.032 29.0736 15.9991L30.6293 14.9244C30.7481 14.8435 30.7211 14.6629 30.5854 14.619Z"
            fill="gray"
          ></path>
          <path
            d="M12.5239 3.58655C12.5469 3.60451 12.5599 3.63146 12.5579 3.66039L12.508 4.61636C12.504 4.6882 12.5848 4.7341 12.6447 4.69319L13.433 4.15135C13.457 4.13538 13.4869 4.13139 13.5138 4.14137L14.4069 4.48364C14.4748 4.50958 14.5426 4.44672 14.5217 4.37687L14.2503 3.45882C14.2423 3.43088 14.2483 3.40195 14.2662 3.379L14.8679 2.63458C14.9138 2.5787 14.8749 2.49388 14.8021 2.49189L13.8451 2.46694C13.8162 2.46594 13.7902 2.45097 13.7743 2.42703L13.2524 1.62474C13.2125 1.56387 13.1207 1.57484 13.0967 1.6427L12.7774 2.54477C12.7674 2.57172 12.7455 2.59267 12.7175 2.59966L11.7935 2.84813C11.7236 2.86709 11.7057 2.95789 11.7626 3.0018L12.5239 3.58655Z"
            fill="gray"
          ></path>
        </svg>
      </button>
      <button style="border-radius: 2px 2px 2px 2px;margin-right: 3px;">
        <div class={styles.unknown} style="color: gray;"></div>
      </button>
      <button style="border-radius: 2px 2px 2px 2px;margin-right: 3px;">
        <div class={styles.unknown} style="color: gray;"></div>
      </button>
      <button
        id="settings"
        onClick={settingsMenu}
        style="border-radius: 2px 10px 10px 2px;"
      >
        <div class={styles.settings} style="color: gray;"></div>
      </button>
    </div>
  );
}

function settingsMenu() {
  settings.disabled = true;

  const settings_menu = document.querySelector(
    'body main > .grid > .flex:nth-child(2) > .grid > div:nth-child(3) > .flex',
  );

  render(
    () => (
      <div
        id="settings-menu"
        style="background: #0e0c10;border-width: 1px;border-radius: 10px;padding: 10px;"
      >
        <style>{globalCss}</style>
        <h1>*Settings to script*</h1>
      </div>
    ),
    settings_menu,
  );
}

onNavigate(async () => {
  const split_path = document.location.pathname.split('/');

  const path = split_path[1];

  // for anime page scripts
  if (split_path.length == 3 && path == 'anime') {
    // const anime_slug = split_path[2];

    // const anime_data = await (
    //   await fetch(`https://api.hikka.io/anime/${anime_slug}`)
    // ).json();

    const buttons_block = document.querySelector(
      'body main > .grid > .flex:nth-child(2) > .grid > div:nth-child(3) > .flex',
    );

    render(Main, buttons_block);

    // call functions under this comment
    // scripts.aniBackground(anime_data);
    //scripts.aniButtons(anime_data);
    //
    //scripts.amanogawaButton(anime_data);
  }
});
